(this["webpackJsonpwebinar-frontend-test-task"]=this["webpackJsonpwebinar-frontend-test-task"]||[]).push([[0],{77:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var o,a=n(0),r=n.n(a),i=n(9),d=n.n(i),c=(n(77),n(19));!function(e){e.Add="todo/ADD",e.LoadState="todo/LOAD_STATE",e.Delete="todo/DELETE",e.ToggleDone="todo/TOGGLE_DONE",e.Update="todo/UPDATE"}(o||(o={}));var s=n(12);var l=n(59);function j(e,t){return Object(l.a)(e,(function(n){if(t.type===o.LoadState)return t.data;if(t.type===o.Add){var a=Object(s.a)({id:"".concat(Date.now().toString(36),"-").concat(Math.floor(1e16*Math.random()).toString(36)),done:!1},t.data.todos);n.todos.push(a)}else if(t.type===o.Delete)n.todos=n.todos.filter((function(e){return e.id!==t.data.id})),n.doneTodos=n.doneTodos.filter((function(e){return e.id!==t.data.id}));else if(t.type===o.ToggleDone){var r=e.todos.findIndex((function(e){return e.id===t.data.id}));if(-1!==r){var i=n.todos.splice(r,1)[0];n.doneTodos.unshift(Object(s.a)(Object(s.a)({},i),{},{done:!0}))}else{var d=e.doneTodos.findIndex((function(e){return e.id===t.data.id})),c=n.doneTodos.splice(d,1)[0];n.todos.push(Object(s.a)(Object(s.a)({},c),{},{done:!1}))}}else{if(t.type!==o.Update)throw new Error;n.todos=t.data.todos}}))}var u=n(5),b=Object(a.createContext)(null),f={todos:[],doneTodos:[]},O="todos",p=function(e){var t=e.children,n=Object(a.useReducer)(j,f),r=Object(c.a)(n,2),i=r[0],d=r[1];return window.state=i,Object(a.useEffect)((function(){var e=localStorage.getItem(O);if(e)try{d({type:o.LoadState,data:JSON.parse(e)})}catch(t){}}),[]),Object(a.useEffect)((function(){localStorage.setItem(O,JSON.stringify(i))}),[i]),Object(u.jsx)(b.Provider,{value:{state:i,dispatch:d},children:t})},h=n(136),x=n(45),m=n(52),g=n(139),v=n(130),y=n(126),T=function(){var e=Object(a.useContext)(b);if(!e)throw new Error("useTodoItems hook should only be used inside TodoItemsContextProvider");return e},D=Object(y.a)((function(){return{root:{marginBottom:24}}}));function S(){var e=D(),t=T().dispatch,n=Object(m.b)(),a=n.control,r=n.handleSubmit,i=n.reset,d=n.watch;return Object(u.jsxs)("form",{onSubmit:r((function(e){t({type:o.Add,data:{todos:e}}),i({title:"",details:""})})),children:[Object(u.jsx)(m.a,{name:"title",control:a,defaultValue:"",rules:{required:!0},render:function(t){var n=t.field;return Object(u.jsx)(g.a,Object(s.a)(Object(s.a)({},n),{},{label:"TODO",fullWidth:!0,className:e.root}))}}),Object(u.jsx)(m.a,{name:"details",control:a,defaultValue:"",render:function(t){var n=t.field;return Object(u.jsx)(g.a,Object(s.a)(Object(s.a)({},n),{},{label:"Details",fullWidth:!0,multiline:!0,className:e.root}))}}),Object(u.jsx)(v.a,{variant:"contained",color:"primary",type:"submit",disabled:!d("title"),children:"Add"})]})}var k=n(44),E=n(24),w=n(60),C=n.n(w),I=n(131),A=n(132),L=n(133),P=n(61),N=n.n(P),R=n(134),F=n(140),J=n(135),U=Object(y.a)({doneRoot:{textDecoration:"line-through",color:"#888888"}}),B=function(e){var t=e.item,n=U(),r=T().dispatch,i=Object(a.useCallback)((function(){return r({type:o.Delete,data:{id:t.id}})}),[t.id,r]),d=Object(a.useCallback)((function(){return r({type:o.ToggleDone,data:{id:t.id}})}),[t.id,r]);return Object(u.jsxs)(I.a,{className:C()(Object(E.a)({},n.doneRoot,t.done)),children:[Object(u.jsx)(A.a,{action:Object(u.jsx)(L.a,{"aria-label":"delete",onClick:i,children:Object(u.jsx)(N.a,{})}),title:Object(u.jsx)(R.a,{control:Object(u.jsx)(F.a,{checked:t.done,onChange:d,name:"checked-".concat(t.id),color:"primary"}),label:t.title})}),t.details?Object(u.jsx)(J.a,{children:Object(u.jsx)(x.a,{variant:"body2",component:"p",children:t.details})}):null]})},M=function(e){var t=e.item,n=e.index;return Object(u.jsx)(k.b,{draggableId:t.id,index:n,children:function(e,n){return Object(u.jsx)("div",Object(s.a)(Object(s.a)(Object(s.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{style:(o=n.isDragging,a=e.draggableProps.style,Object(s.a)(Object(s.a)({userSelect:"none",padding:"".concat(48," px 0"),margin:"0 0 ".concat(24,"px 0"),background:"#fff",transition:"opacity 100ms linear"},a),{},{opacity:o?.5:1})),children:Object(u.jsx)(B,{item:t})}));var o,a}},t.id)};var W=n(138),G={type:"spring",damping:25,stiffness:120,duration:.25},V=function(e){var t=e.item;return Object(u.jsx)(W.a.li,{transition:G,layout:!0,style:{margin:"24px 0"},children:Object(u.jsx)(B,{item:t})},t.id)},_=Object(y.a)({root:{listStyle:"none",padding:0}}),q=function(){var e=T(),t=e.state,n=t.todos,a=t.doneTodos,r=e.dispatch,i=_();return Object(u.jsx)(k.a,{onDragEnd:function(e){e.destination&&(n=function(e,t,n){var o=Array.from(e),a=o.splice(t,1),r=Object(c.a)(a,1)[0];return o.splice(n,0,r),o}(n,e.source.index,e.destination.index),n=n.slice().sort((function(e,t){return e.done&&!t.done?1:!e.done&&t.done?-1:0})),r({type:o.Update,data:{todos:n}}))},children:Object(u.jsx)(k.c,{droppableId:"todo",children:function(e,t){return Object(u.jsxs)("ul",Object(s.a)(Object(s.a)({className:i.root},e.droppableProps),{},{ref:e.innerRef,style:(o=t.isDraggingOver,{background:o?"rgba(174, 183, 194, 0.07)":"transparent",transition:"background-color 200ms linear",padding:"20px 0",borderRadius:"4px"}),children:[n.map((function(e,t){return Object(u.jsx)(M,{item:e,index:t},e.id)})),e.placeholder,a.map((function(e){return Object(u.jsx)(V,{item:e},e.id)}))]}));var o}})})};var H=function(){return Object(u.jsxs)(h.a,{maxWidth:"sm",children:[Object(u.jsx)("header",{children:Object(u.jsx)(x.a,{variant:"h2",component:"h1",children:"Todo List"})}),Object(u.jsxs)("main",{children:[Object(u.jsx)(S,{}),Object(u.jsx)(q,{})]})]})},z=n(63),K=n(137),Q=Object(z.a)({palette:{primary:{main:"#9012fe"},secondary:{main:"#b2aabf"}}});var X=function(){return Object(u.jsx)(p,{children:Object(u.jsx)(K.a,{theme:Q,children:Object(u.jsx)(H,{})})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,141)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))};d.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(X,{})}),document.getElementById("root")),Y()}},[[88,1,2]]]);
//# sourceMappingURL=main.82d850be.chunk.js.map